<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-7XTFFVDB9K"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() { dataLayer.push(arguments); }
      gtag('js', new Date());
      gtag('config', 'G-7XTFFVDB9K');
    </script>

    <title>And Sound</title>
    <link rel="stylesheet" href="styles.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:ital,wght@0,200;1,200&display=swap"
      rel="stylesheet"
    />
  </head>

  <body>

    <header class="site-title">
      <a href="index.html">Doug MacDowell</a>
    </header>

    <nav>
      <a href="portfolio.html">&larr; Projects</a>
    </nav>

    <section>
      <article>
        <h1><span class="highlight">AND SOUND - Special Little CDs</span></h1>

        <p class="description">
          In 1977, the Voyager 1 and 2 spacecraft launched into space.
          <br /><br />
          They look like giant meat thermometers, and are now 14 billion miles away from earth.
          <br /><br />
          Attached to each spacecraft is a golden record. The records include images of earth encoded as sound.
          If someone ever finds Voyager 1 or 2, they can use math to decode the audio back into images of earth.
        </p>

        <img
          src="images/and-sound-golden-record.jpeg"
          alt=""
          loading="lazy"
          width="1000"
          height="563"
          class="responsive-image"
        />

        <p class="description">
          This is what inspired AND SOUND. These mini-CDRs also include images encoded as sound.
          It is possible to decode the audio on these CDs back into images.
          <br /><br />
          Here's how it works:
          <br />
          1. I choose an image I think is special.<br />
          2. Code converts the image to an audio track.<br />
          3. The audio track is burned to the mini-CDR.<br />
          4. More code decodes the audio back into image (this process results in a slightly modified image).
        </p>

        <p class="description">
          Here's an example (using the first image on the CDR).
        </p>

        <img
          src="images/and-sound-1-1.png"
          alt=""
          loading="lazy"
          width="600"
          height="800"
          class="responsive-image"
        />

        <p class="description">
          Code converts the image into audio:
        </p>
<br />
        <audio controls>
          <source src="audio/and-sound-1.mp3" type="audio/mpeg">
          <source src="audio/clip.ogg" type="audio/ogg">
          Your browser does not support the audio element.
        </audio>

        <p class="description">
          More code opens the audio, and decodes it back into image. Notice the difference?
        </p>

        <img
          src="images/and-sound-1.png"
          alt=""
          loading="lazy"
          width="512"
          height="682"
          class="responsive-image"
        />

        <p class="description">
          The process repeats for 5 more images! If you ever find a CD player compatible with mini-CDR
          (like a desktop computer) you can listen for some hidden tracks like this:
        </p>
<br />
        <audio controls>
          <source src="audio/Track-1-intro.mp3" type="audio/mpeg">
          <source src="audio/clip.ogg" type="audio/ogg">
          Your browser does not support the audio element.
        </audio>

        <p class="description">
          These are the rest of the images.
        </p>

        <img src="images/and-sound-2.png" class="responsive-image" width="512" height="682" alt="" />
        <img src="images/and-sound-3.png" class="responsive-image" width="512" height="682" alt="" />
        <img src="images/and-sound-4.png" class="responsive-image" width="512" height="682" alt="" />
        <img src="images/and-sound-5.png" class="responsive-image" width="512" height="682" alt="" />
        <img src="images/and-sound-6.png" class="responsive-image" width="512" height="682" alt="" />

        <p class="description">
          Code that encodes image to audio:
        </p><br />

        <div class="code-container">
<pre><code class="language-python">
# encode_image_to_audio.py
import numpy as np
from PIL import Image
import soundfile as sf
import sys

def encode_image_to_audio(
        img_path,
        out_wav,
        sample_rate=44100,
        carrier_freq=1800.0,
        line_duration=0.04,
        sync_freq=800.0,
        sync_duration=0.015,
        width_pixels=512,
        amplitude=0.9):

    img = Image.open(img_path).convert('L')
    orig_w, orig_h = img.size
    new_h = int(orig_h * width_pixels / orig_w)
    img = img.resize((width_pixels, new_h), Image.LANCZOS)
    arr = np.array(img) / 255.0
    height, width = arr.shape

    t_line = np.linspace(0, line_duration, int(sample_rate * line_duration), endpoint=False)
    carrier = np.sin(2 * np.pi * carrier_freq * t_line)

    t_sync = np.linspace(0, sync_duration, int(sample_rate * sync_duration), endpoint=False)
    sync_tone = 0.7 * np.sin(2 * np.pi * sync_freq * t_sync)

    audio_blocks = []
    samples_per_pixel = len(t_line) // width

    for row in arr:
        line_audio = np.zeros_like(t_line)
        for i, pix in enumerate(row):
            s = i * samples_per_pixel
            e = s + samples_per_pixel
            if e > len(line_audio):
                e = len(line_audio)
            line_audio[s:e] = amplitude * pix * carrier[s:e]

        audio_blocks.append(line_audio)
        audio_blocks.append(sync_tone)

    full_audio = np.concatenate(audio_blocks).astype(np.float32)
    sf.write(out_wav, full_audio, sample_rate)
    print(f"Encoded {img_path} → {out_wav}")
    print(f"Image size encoded: {width} × {height} pixels")


if __name__ == "__main__":
    if len(sys.argv) != 3:
        print("Usage: python3 encode_image_to_audio.py input_image output_wav")
    else:
        input_image = sys.argv[1]
        output_wav = sys.argv[2]
        encode_image_to_audio(input_image, output_wav)

</code></pre>
        </div>

        <p class="description">
          Code that decodes audio back into image:
        </p><br />

        <div class="code-container">
<pre><code class="language-python">
import numpy as np
from PIL import Image
import soundfile as sf
import sys

def decode_audio_to_image(
        wav_path,
        out_image,
        sample_rate=44100,
        carrier_freq=1800.0,
        line_duration=0.04,
        sync_freq=800.0,
        sync_duration=0.015,
        width_pixels=512):

    audio, sr = sf.read(wav_path)
    assert sr == sample_rate, f"Sample rate mismatch: {sr} vs {sample_rate}"

    line_samples = int(sample_rate * line_duration)
    sync_samples = int(sample_rate * sync_duration)
    total_samples_per_line = line_samples + sync_samples

    num_lines = len(audio) // total_samples_per_line

    image_data = []
    t_line = np.linspace(0, line_duration, line_samples, endpoint=False)
    carrier = np.sin(2 * np.pi * carrier_freq * t_line)

    for i in range(num_lines):
        start = i * total_samples_per_line
        line_audio = audio[start:start+line_samples]

        pixels = []
        samples_per_pixel = line_samples // width_pixels

        for p in range(width_pixels):
            s = p * samples_per_pixel
            e = s + samples_per_pixel
            if e > len(line_audio):
                e = len(line_audio)

            # Multiply by carrier (demodulate) and take average → pixel brightness
            pixel_value = np.mean(line_audio[s:e] * carrier[s:e])
            pixels.append(pixel_value)

        image_data.append(pixels)

    arr = np.array(image_data)
    # normalize to 0-255
    arr = arr - arr.min()
    arr = arr / arr.max() * 255
    arr = arr.astype(np.uint8)

    img = Image.fromarray(arr, mode='L')
    img.save(out_image)
    print(f"Decoded {wav_path} → {out_image}")
    print(f"Image size: {arr.shape[1]} × {arr.shape[0]}")

if __name__ == "__main__":
    if len(sys.argv) != 3:
        print("Usage: python3 decode_audio_to_image.py input_wav output_image")
    else:
        wav_file = sys.argv[1]
        out_image = sys.argv[2]
        decode_audio_to_image(wav_file, out_image)

</code></pre>
        </div>

      </article>
    </section>

  </body>
</html>
